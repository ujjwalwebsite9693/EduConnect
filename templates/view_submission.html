{% extends "base.html" %}

{% block body_class %}bg-dashboard{% endblock %}

{% block content %}
<div class="teacher-page-wrapper fade">

  <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
    <div>
      <h4 class="section-title mb-1">Viewing Submission</h4>
      <div class="text-muted small">
        Paper: <b>{{ paper.title if paper else "Unknown" }}</b> â€¢
        Student: <b>{{ student.name if student else "Unknown" }}</b>
        ({{ student.username if student else "" }})
      </div>
    </div>

    <a href="{{ url_for('teacher_dashboard') }}#grading"
       class="btn btn-outline-light btn-sm rounded-pill">
      <i class="bi bi-arrow-left"></i> Back to Grading
    </a>
  </div>

  <div class="card glass-card p-3 mb-3">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <span class="badge rounded-pill bg-soft-primary text-primary">
        Page {{ page }} of {{ total }}
      </span>

      <div class="d-flex gap-2">
        {% if page > 1 %}
        <a href="{{ url_for('view_submission', group_id=group_id, page=page-1) }}"
           class="btn btn-sm btn-outline-light rounded-pill">
          <i class="bi bi-arrow-left-circle"></i> Previous
        </a>
        {% endif %}

        {% if page < total %}
        <a href="{{ url_for('view_submission', group_id=group_id, page=page+1) }}"
           class="btn btn-sm btn-outline-light rounded-pill">
          Next <i class="bi bi-arrow-right-circle"></i>
        </a>
        {% endif %}
      </div>
    </div>

    <div class="text-center">
      {# ðŸ”¹ IMPORTANT: use the URL directly (works for Cloudinary + local) #}
      <img src="{{ current_file }}"
           alt="Solution page"
           class="img-fluid rounded shadow-lg"
           style="max-height: 80vh; object-fit: contain;">
    </div>
  </div>

</div>
{% endblock %}
